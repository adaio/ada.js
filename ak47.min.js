var ak47=function(e){function n(){var t=Array.prototype.slice.call(arguments),n;return t.length==1&&typeof t[0]=="object"&&t[0].constructor==Object?n=i:t.length>1&&t.slice(0,t.length-1).every(r)?n=f:t.length==1&&Array.isArray(t[0])?n=o:(n=u,t=t.slice(0,1)),n.apply(e,t)}function r(e){return e&&e.extendsAk47Pubsub}function i(e,t){var n={},r,i;for(r in e)i=e[r],n[r]=!(!Array.isArray(t)||!r in t)||typeof i=="object"&&i.constructor==Object||typeof i=="function"?i:u(i);return n}function s(n){if(n&&n.subscribers&&n.subscribers.length==0)return;var r=Array.prototype.slice.call(arguments,1);t(function(){n.subscribers.forEach(function(n,i){if(!n||typeof n.fn!="function")return;if(n.ak47Subscriber){n.harvest[n.column]=r[0],n.harvest.call!=e&&(clearTimeout(n.harvest.call),n.call=e),n.harvest.call=setTimeout(function(){n.harvest.call=e;var t=n.harvest.value;n.harvest.value=n.fn.apply(e,n.harvest),n.property.publish(n.harvest.value,t)},0);return}t(function(){n.fn.apply(e,r)})})})}function o(t){function r(e){a(n,e)}function i(e){l(n,e)}function o(){var t=[n];Array.prototype.push.apply(t,arguments),s.apply(e,t)}var n=t||function(){return r.apply(e,arguments)};return n.subscribers=[],n.subscribe=r,n.unsubscribe=i,n.publish=o,n.extendsAk47Pubsub=!0,n}function u(t,n,r){function u(){return n?n(i):i}function a(e){return arguments.length>0&&l(e),u()}function f(e){return arguments.length&&(i=e),i}function l(t,n){var o=n?e:u();return i=r?r(t,i):t,!n&&s(a,u(),o),i}var i=e;return o(a),a.isAK47Property=!0,a.raw=f,a.publish=function(){var n=[a,u()].concat(Array.prototype.slice.call(arguments));return s.apply(e,n)},l(t,!0),a}function a(e,t){e.subscribers.push(typeof t=="function"?{fn:t}:t)}function f(){function s(){return n.apply(this,t)}var e=Array.prototype.slice.call(arguments,0,arguments.length-1),t=[],n=arguments[arguments.length-1],r=-1,i;while(++r<e.length)i=e[r],t[r]=typeof i=="function"?i():i,i.subscribe({fn:n,property:s,ak47Subscriber:!0,harvest:t,column:r});return o(s),s.isAK47Property=!0,s.raw=s,s}function l(t,n){var r=t.subscribers;r[r.indexOf(n)]=e}var t=typeof process!="undefined"&&process.nextTick||function(e){setTimeout(function(){e()},0)};return n.nextTick=t,n.pubsub=o,n.property=u,n}();typeof module!="undefined"&&module.exports&&(module.exports=ak47)